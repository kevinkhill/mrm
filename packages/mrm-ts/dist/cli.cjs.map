{"version":3,"sources":["../src/cli.ts","../src/config.ts","../src/lib/tryFile.ts","../src/lib/promises.ts","../src/constants.ts","../src/errors.ts","../src/lib/collector.ts","../src/mrm.ts","../src/lib/resolveUsingNpx.ts","../src/lib/console.ts","../src/lib/listify.ts","../src/lib/runUpdater.ts"],"sourcesContent":["#!/usr/bin/env node\n\nimport kleur from \"kleur\";\nimport { padEnd, sortBy } from \"lodash-es\";\nimport longest from \"longest\";\nimport { random } from \"middleearth-names\";\nimport minimist from \"minimist\";\nimport ora from \"ora\";\n\nimport { getConfig } from \"./config\";\nimport { CONFIG_FILENAME, DEFAULT_DIRECTORIES, EXAMPLES } from \"./constants\";\nimport {\n\tisInvalidTaskError,\n\tisUndefinedOptionError,\n\tisUnknownAliasError,\n\tisUnknownTaskError,\n} from \"./errors\";\nimport { getAllTasks } from \"./lib/collector\";\nimport { printError } from \"./lib/console\";\nimport { toNaturalList } from \"./lib/listify\";\nimport { resolveDirectories } from \"./lib/resolveUsingNpx\";\nimport { runUpdater } from \"./lib/runUpdater\";\nimport { mrmDebug, run } from \"./mrm\";\n\nimport type { CliArgs } from \"./lib/types\";\n\nexport const cliDebug = mrmDebug.extend(\"cli\");\n\nexport const spinner = ora(\"Loading mrm\");\n\n/**\n * mrm, the cli tool\n */\nasync function main() {\n\tconst debug = cliDebug;\n\tconst argv: CliArgs = minimist(process.argv.slice(2), {\n\t\talias: {\n\t\t\ti: \"interactive\",\n\t\t},\n\t\tboolean: [\"view-config\"],\n\t});\n\n\tdebug(\"argv = %O\", argv);\n\n\tif (!mrmDebug.enabled) {\n\t\tspinner.start();\n\t}\n\n\t// Collect positional args as tasks to run\n\tconst tasks = argv._;\n\n\t// How are we executing\n\tconst binaryPath = process.env._;\n\tconst binaryName =\n\t\tbinaryPath && binaryPath.endsWith(\"/npx\") ? \"npx mrm\" : \"mrm\";\n\n\t// Preset\n\tconst preset = argv.preset || \"default\";\n\tconst isDefaultPreset = preset === \"default\";\n\n\t// Task Dirs\n\tconst directories = [...DEFAULT_DIRECTORIES];\n\n\tspinner.color = \"yellow\";\n\tspinner.text = `resolving ${preset}`;\n\tconst resolvedDirs = await resolveDirectories(directories, preset, argv);\n\tconst options = await getConfig(directories, CONFIG_FILENAME, argv);\n\n\tdebug(resolvedDirs);\n\tdebug(options);\n\n\tif (argv[\"view-config\"]) {\n\t\tconsole.log(\"\\n\", kleur.yellow().underline(\"Tasks\"), \"\\n\");\n\t\tconsole.log(tasks);\n\t\tconsole.log(\"\\n\", kleur.yellow().underline(\"Directories\"), \"\\n\");\n\t\tconsole.log(directories);\n\t\tconsole.log(\"\\n\", kleur.yellow().underline(\"Options\"), \"\\n\");\n\t\tconsole.log(options);\n\t\tprocess.exit(1);\n\t}\n\n\t// debug(\"collecting configs from %O\", directories);\n\n\tif (tasks.length === 0 || tasks[0] === \"help\") {\n\t\tawait commandHelp();\n\t\treturn;\n\t}\n\n\ttry {\n\t\tspinner.succeed(\"Done.\");\n\t\tawait run(tasks, directories, options, argv);\n\t} catch (err: unknown) {\n\t\tif (isUnknownAliasError(err)) {\n\t\t\tprintError(err.message);\n\t\t} else if (isUnknownTaskError(err)) {\n\t\t\tconst { taskName } = err.extra;\n\t\t\tif (isDefaultPreset) {\n\t\t\t\tconst modules = directories\n\t\t\t\t\t.slice(0, -1)\n\t\t\t\t\t.map(d => `${d}/${taskName}/index.js`)\n\t\t\t\t\t.concat([\n\t\t\t\t\t\t`\"${taskName}\" in the default mrm tasks`,\n\t\t\t\t\t\t`mrm-task-${taskName} package in local node_modules`,\n\t\t\t\t\t\t`${taskName} package in local node_modules`,\n\t\t\t\t\t\t`mrm-task-${taskName} package on the npm registry`,\n\t\t\t\t\t\t`${taskName} package on the npm registry`,\n\t\t\t\t\t]);\n\t\t\t\tprintError(\n\t\t\t\t\t`${err.message}\n\nWe've tried these locations:\n\n- ${modules.join(\"\\n- \")}`\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tprintError(`Task \"${taskName}\" not found in the \"${preset}\" preset.\n\nNote that when a preset is specified no default search locations are used.`);\n\t\t\t}\n\t\t} else if (isInvalidTaskError(err)) {\n\t\t\tprintError(`${err.message}\n\nMake sure your task module exports a function.`);\n\t\t} else if (isUndefinedOptionError(err)) {\n\t\t\tconst { unknown } = err.extra;\n\t\t\tconst values = unknown.map(name => [name, random()]);\n\t\t\tconst configList = toNaturalList(unknown);\n\t\t\tconst heading = `Required config options are missed: ${configList}.`;\n\t\t\tconst cliHelp = `  ${binaryName} ${tasks.join(\" \")} ${values\n\t\t\t\t.map(([n, v]) => `--config:${n} \"${v}\"`)\n\t\t\t\t.join(\" \")}`;\n\t\t\tif (isDefaultPreset) {\n\t\t\t\tconst userDirectories = directories.slice(0, -1);\n\t\t\t\tprintError(\n\t\t\t\t\t`${heading}\n\n1. Create a \"${CONFIG_FILENAME}\" file:\n\n{\n${values.map(([n, v]) => `  \"${n}\": \"${v}\"`).join(\",\\n\")}\n}\n\nIn one of these folders:\n\n- ${userDirectories.join(\"\\n- \")}\n\n2. Or pass options via command line:\n\n${cliHelp}\n\t`\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tprintError(\n\t\t\t\t\t`${heading}\n\nYou can pass the option via command line:\n\n${cliHelp}\n\nNote that when a preset is specified no default search locations are used.`\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tthrow err;\n\t\t}\n\t}\n\n\tfunction getUsage() {\n\t\tconst commands = EXAMPLES.map(x => x.join(\"\"));\n\t\tconst commandsWidth = longest(commands).length;\n\t\treturn EXAMPLES.map(([command, opts, description]) =>\n\t\t\t[\n\t\t\t\t\"   \",\n\t\t\t\tkleur.bold(binaryName),\n\t\t\t\tkleur.cyan(command),\n\t\t\t\tkleur.yellow(opts),\n\t\t\t\tpadEnd(\"\", commandsWidth - (command + opts).length),\n\t\t\t\tdescription && `# ${description}`,\n\t\t\t].join(\" \")\n\t\t).join(\"\\n\");\n\t}\n\n\tasync function getTasksList() {\n\t\tconst allTasks = await getAllTasks(directories, options);\n\t\tconst names = sortBy(Object.keys(allTasks));\n\t\tconst nameColWidth = names.length > 0 ? longest(names).length : 0;\n\n\t\treturn names\n\t\t\t.map(name => {\n\t\t\t\tconst description = Array.isArray(allTasks[name])\n\t\t\t\t\t? `Runs ${toNaturalList(allTasks[name])}`\n\t\t\t\t\t: allTasks[name];\n\t\t\t\treturn (\n\t\t\t\t\t\"    \" + kleur.cyan(padEnd(name, nameColWidth)) + \"  \" + description\n\t\t\t\t);\n\t\t\t})\n\t\t\t.join(\"\\n\");\n\t}\n\n\tasync function commandHelp() {\n\t\tconsole.log(\n\t\t\t[\n\t\t\t\tkleur.underline(\"Usage\"),\n\t\t\t\tgetUsage(),\n\t\t\t\tkleur.underline(\"Available tasks\"),\n\t\t\t\tawait getTasksList(),\n\t\t\t].join(\"\\n\\n\")\n\t\t);\n\t\tconsole.log(\"\\n\");\n\t}\n}\n\n/**\n * Catch unhandled errors potentially thrown by tasks?\n */\nprocess.on(\"unhandledRejection\", (err: Error) => {\n\t// if (String(err.constructor.name).startsWith('Mrm')) {\n\tcliDebug(\"ERROR\");\n\tcliDebug(err);\n\tprintError(err.message);\n\tprocess.exit(1);\n\t// } else {\n\t// \tthrow err;\n\t// }\n});\n\nrunUpdater();\nmain();\n","import { forEach } from \"lodash-es\";\nimport { createRequire } from \"node:module\";\n\nimport { tryFile } from \"./lib/tryFile\";\n\nimport type { CliArgs, MrmOptions } from \"./lib/types\";\n\nexport async function getConfig(\n\tdirectories: string[],\n\tfilename: string,\n\targv: CliArgs\n): Promise<MrmOptions> {\n\tconst configFromFile = await getConfigFromFile(directories, filename);\n\n\treturn {\n\t\t...configFromFile,\n\t\t...getConfigFromCommandLine(argv),\n\t} as MrmOptions;\n}\n\n/**\n * Find and load config file.\n *\n * @param {string[]} directories\n * @param {string} filename\n * @return {Promise<Object>}\n */\nexport async function getConfigFromFile(\n\tdirectories: string[],\n\tfilename: string\n): Promise<Partial<MrmOptions>> {\n\tconst require = createRequire(import.meta.url);\n\n\ttry {\n\t\tconst filepath = await tryFile(directories, filename);\n\n\t\treturn require(filepath);\n\t} catch (err) {\n\t\treturn {};\n\t}\n}\n\n/**\n * Get config options from command line, passed as --config:foo bar.\n *\n * @param {Object} argv\n * @return {Object}\n */\nexport function getConfigFromCommandLine(argv: CliArgs) {\n\tconst options = {} as Partial<MrmOptions>;\n\n\tforEach(argv, (value, key) => {\n\t\tif (key.startsWith(\"config:\")) {\n\t\t\toptions[key.replace(/^config:/, \"\")] = value;\n\t\t}\n\t});\n\n\treturn options;\n}\n","import fs from \"fs\";\nimport kleur from \"kleur\";\nimport path from \"path\";\n\nimport { promiseFirst } from \"./promises\";\n\n/**\n * Try to load a file from a list of folders.\n *\n * @param {string[]} directories\n * @param {string} filename\n * @return {Promise<string>} Absolute path or undefined\n */\n// eslint-disable-next-line require-await\nexport async function tryFile(directories, filename): Promise<any> {\n\tconst debug = mrmDebug.extend(\"tryFile\");\n\tdebug(\"search: %s\", kleur.bold().cyan(filename));\n\n\ttry {\n\t\treturn promiseFirst(\n\t\t\tdirectories.map(dir => {\n\t\t\t\tdebug(\"entering: %s\", kleur.yellow(dir));\n\t\t\t\tconst filepath = path.resolve(dir, filename);\n\n\t\t\t\treturn async function () {\n\t\t\t\t\tawait fs.promises.access(filepath);\n\t\t\t\t\tdebug(\"+++ %s\", kleur.green(filepath));\n\t\t\t\t\treturn filepath;\n\t\t\t\t};\n\t\t\t})\n\t\t);\n\t} catch (err) {\n\t\tthrow new Error(`File \"${filename}\" not found.`);\n\t}\n}\n","/**\n * Runs an array of promises in series\n */\nexport function promiseSeries<T>(items: T[], iterator: (item: T) => unknown) {\n\treturn items.reduce((iterable, name) => {\n\t\treturn iterable.then(() => iterator(name));\n\t}, Promise.resolve());\n}\n\n/**\n * Executes promise-returning thunks in series until one is resolved\n *\n * @method promiseFirst\n *\n * @param  {Array} thunks\n * @return {Promise}\n */\nexport async function promiseFirst<T extends () => unknown>(\n\tthunks: T[],\n\terrors: Error[] = []\n) {\n\tif (thunks.length === 0) {\n\t\tthrow new Error(`None of the ${errors.length} thunks resolved.\n\n${errors.join(\"\\n\")}`);\n\t} else {\n\t\tconst [thunk, ...rest] = thunks;\n\t\ttry {\n\t\t\treturn await thunk();\n\t\t} catch (error) {\n\t\t\treturn promiseFirst(rest, [...errors, error]);\n\t\t}\n\t}\n}\n","import envPaths from \"env-paths\";\nimport { homedir } from \"node:os\";\nimport path from \"node:path\";\n\n/**\n * Filename for mrm configuration\n */\nexport const CONFIG_FILENAME = \"config.json\";\n\n/**\n * Configuration for the degit resolver\n */\nexport const DEGIT_USE_FORCE = true;\nexport const DEGIT_USE_CACHE = true;\n\n/**\n * Default Directories for mrm tasks and config\n */\nexport const DEFAULT_DIRECTORIES = [\n\tpath.resolve(homedir(), \"dotfiles/mrm\"),\n\tpath.resolve(homedir(), \".mrm\"),\n];\n\n/**\n * Path to mrm's local task cache\n */\nexport const TASK_CACHE_DIR = envPaths(\"mrm\", { suffix: \"tasks\" }).cache;\n\n/**\n * CLI examples\n */\nexport const EXAMPLES = [\n\t[\"\", \"\", \"List of available tasks\"],\n\t[\"<task>\", \"\", \"Run a task or an alias\"],\n\t[\"<task>\", \"--dir ~/unicorn\", \"Custom config and tasks folder\"],\n\t[\"<task>\", \"--preset unicorn\", \"Load config and tasks from a preset\"],\n\t[\n\t\t\"<task>\",\n\t\t\"--config:foo coffee --config:bar pizza\",\n\t\t\"Override config options\",\n\t],\n];\n","interface ExtraRecordTaskName {\n\ttaskName: string | string[];\n}\n\ninterface ExtraRecordUnknown {\n\tunknown: string[];\n}\n\nexport class MrmBaseError extends Error {\n\tdeclare extra?: ExtraRecordTaskName | ExtraRecordUnknown;\n\tconstructor(message: string, extra?: MrmBaseError[\"extra\"]) {\n\t\tsuper(message);\n\t\tthis.name = this.constructor.name;\n\t\tthis.extra = extra;\n\t}\n}\n\nexport class MrmUnknownAlias extends MrmBaseError {\n\tconstructor(message: string) {\n\t\tsuper(message);\n\t\tthis.name = this.constructor.name;\n\t}\n}\n\nexport class MrmUnknownTask extends MrmBaseError {\n\tdeclare extra: ExtraRecordTaskName;\n\tconstructor(message: string, extra?: ExtraRecordTaskName) {\n\t\tsuper(message);\n\t\tthis.name = this.constructor.name;\n\t\tif (extra) {\n\t\t\tthis.extra = extra;\n\t\t}\n\t}\n}\n\nexport class MrmInvalidTask extends MrmBaseError {\n\tconstructor(message: string, extra?: ExtraRecordTaskName) {\n\t\tsuper(message);\n\t\tthis.name = this.constructor.name;\n\t\tthis.extra = extra;\n\t}\n}\n\nexport class MrmUndefinedOption extends MrmBaseError {\n\tdeclare extra: ExtraRecordUnknown;\n\tconstructor(message: string, extra?: ExtraRecordUnknown) {\n\t\tsuper(message);\n\t\tthis.name = this.constructor.name;\n\t\tif (extra) {\n\t\t\tthis.extra = extra;\n\t\t}\n\t}\n}\n\n/**\n * Type guard for `MrmUnknownAlias`\n */\nexport function isUnknownAliasError(err: unknown): err is MrmUnknownAlias {\n\treturn (err as MrmBaseError).constructor === MrmUnknownAlias;\n}\n\n/**\n * Type guard for `MrmUnknownTask`\n */\nexport function isUnknownTaskError(err: unknown): err is MrmUnknownTask {\n\treturn (err as MrmBaseError).constructor === MrmUnknownTask;\n}\n\n/**\n * Type guard for `MrmInvalidTask`\n */\nexport function isInvalidTaskError(err: unknown): err is MrmInvalidTask {\n\treturn (err as MrmBaseError).constructor === MrmInvalidTask;\n}\n\n/**\n * Type guard for `MrmUndefinedOption`\n */\nexport function isUndefinedOptionError(\n\terr: unknown\n): err is MrmUndefinedOption {\n\treturn (err as MrmBaseError).constructor === MrmUndefinedOption;\n}\n","import glob from \"glob\";\nimport kleur from \"kleur\";\nimport { createRequire } from \"node:module\";\nimport path from \"path\";\n\nimport { mrmDebug } from \"../mrm\";\nimport { MrmOptions } from \"./types\";\n\n/* Return the functionality of `require` from commonjs */\nconst require = createRequire(import.meta.url);\n\n/**\n * Get all aliases from the options\n *\n * @param {Object} options\n * @return {Object}\n */\nexport function getAllAliases(options: MrmOptions): MrmOptions[\"aliases\"] {\n\treturn options.aliases ?? {};\n}\n\n/**\n * Return all task and alias names and descriptions from all search directories.\n */\nexport async function getAllTasks(\n\tdirectories: string[],\n\toptions: MrmOptions\n): Promise<any> {\n\tconst debug = mrmDebug.extend(\"getAllTasks\");\n\tconst allTasks = getAllAliases(options);\n\n\tdebug(\"searching dirs: %O\", directories);\n\n\tdirectories.forEach(dir => {\n\t\tdebug(\"entering: %s\", kleur.yellow(dir));\n\t\tconst tasks = glob.sync(`${dir}/*/index.js`);\n\t\tdebug(\"\\\\ task count: %s\", kleur.bold().cyan(tasks.length));\n\n\t\ttasks.forEach(filename => {\n\t\t\tconst taskName = path.basename(path.dirname(filename));\n\t\t\tdebug(\" | %s\", kleur.green(taskName));\n\t\t\tif (!allTasks[taskName]) {\n\t\t\t\tconst module = require(filename);\n\t\t\t\tallTasks[taskName] = module.description || \"\";\n\t\t\t}\n\t\t});\n\t});\n\n\treturn allTasks;\n}\n","import Debug from \"debug\";\nimport inquirer from \"inquirer\";\nimport kleur from \"kleur\";\nimport { partition } from \"lodash-es\";\nimport { createRequire } from \"node:module\";\n\nimport {\n\tMrmInvalidTask,\n\tMrmUndefinedOption,\n\tMrmUnknownAlias,\n\tMrmUnknownTask,\n} from \"./errors\";\nimport { getAllAliases } from \"./lib/collector\";\nimport { promiseFirst, promiseSeries } from \"./lib/promises\";\nimport { resolveUsingNpx } from \"./lib/resolveUsingNpx\";\nimport { tryFile } from \"./lib/tryFile\";\nimport { CliArgs, MrmOptions, MrmTask } from \"./lib/types\";\n\n/* Return the functionality of `require` from commonjs */\nconst require = createRequire(import.meta.url);\n\nexport const mrmDebug = Debug(\"mrm\");\n\n/**\n * Returns the correct `mrm-` prefixed package name\n *\n * @param {} type\n * @param {string} packageName\n * @returns {string}\n */\nexport function getPackageName(\n\ttype: \"task\" | \"preset\",\n\tpackageName: string\n): string {\n\tconst [scopeOrTask, scopedTaskName] = packageName.split(\"/\");\n\treturn scopedTaskName\n\t\t? `${scopeOrTask}/mrm-${type}-${scopedTaskName}`\n\t\t: `mrm-${type}-${scopeOrTask}`;\n}\n\n/**\n * Run a task\n */\nexport function run(\n\tname: string | string[],\n\tdirectories: string[],\n\toptions: MrmOptions,\n\targv: CliArgs\n): Promise<void> {\n\tif (Array.isArray(name)) {\n\t\treturn promiseSeries(name, n => {\n\t\t\treturn run(n, directories, options, argv);\n\t\t});\n\t}\n\n\tif (getAllAliases(options)[name]) {\n\t\treturn runAlias(name, directories, options, argv);\n\t}\n\n\treturn runTask(name, directories, options, argv);\n}\n\n/**\n * Run an alias.\n */\nexport async function runAlias(\n\taliasName: string,\n\tdirectories: string[],\n\toptions: MrmOptions,\n\targv: CliArgs\n): Promise<void> {\n\tconst tasks = getAllAliases(options)[aliasName];\n\n\tif (!tasks) {\n\t\tthrow new MrmUnknownAlias(`Alias \"${aliasName}\" not found.`);\n\t}\n\n\tconsole.log(kleur.yellow(`Running alias ${aliasName}...`));\n\n\treturn promiseSeries(tasks, name => {\n\t\tconst isAlias = getAllAliases(options)[name];\n\n\t\tif (isAlias) {\n\t\t\treturn runAlias(name, directories, options, argv);\n\t\t} else {\n\t\t\treturn runTask(name, directories, options, argv);\n\t\t}\n\t});\n}\n\n/**\n * Run a task.\n *\n * @param {string} taskName\n * @param {string[]} directories\n * @param {Object} options\n * @param {Object} [argv]\n * @returns {Promise}\n */\nexport async function runTask(\n\ttaskName: string | string[],\n\tdirectories: string[],\n\toptions: MrmOptions,\n\targv: CliArgs\n): Promise<void> {\n\tconst taskPackageName = getPackageName(\"task\", taskName);\n\n\tlet modulePath: string | null;\n\ttry {\n\t\tmodulePath = await promiseFirst([\n\t\t\t() => tryFile(directories, `${taskName}/index.js`),\n\t\t\t() => require.resolve(taskPackageName),\n\t\t\t() => resolveUsingNpx(taskPackageName),\n\t\t\t() => require.resolve(taskName),\n\t\t\t() => resolveUsingNpx(taskName),\n\t\t]);\n\t} catch {\n\t\tmodulePath = null;\n\t}\n\n\treturn new Promise((resolve, reject) => {\n\t\tif (!modulePath) {\n\t\t\treject(\n\t\t\t\tnew MrmUnknownTask(`Task \"${taskName}\" not found.`, {\n\t\t\t\t\ttaskName,\n\t\t\t\t})\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tconst module = require(modulePath);\n\t\tif (typeof module !== \"function\") {\n\t\t\treject(\n\t\t\t\tnew MrmInvalidTask(`Cannot call task \"${taskName}\".`, { taskName })\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tconsole.log(kleur.cyan(`Running ${taskName}...`));\n\n\t\tPromise.resolve(getTaskOptions(module, argv.interactive, options))\n\t\t\t.then(config => module(config, argv))\n\t\t\t.then(resolve)\n\t\t\t.catch(reject);\n\t});\n}\n\n/**\n * Get task specific options, either by running Inquirer.js in interactive mode,\n * or using defaults.\n *\n * @param task executing function of the task\n * @param interactive Whether or not interactive mode is enabled.\n * @param options Default available options passed into the task.\n */\nasync function getTaskOptions(\n\ttask: MrmTask,\n\tinteractive = false,\n\toptions: Record<string, any> = {}\n): Promise<Record<string, any>> {\n\t// If no parameters set, resolve to default options (from config file or command line).\n\tif (!task.parameters) {\n\t\treturn options;\n\t}\n\n\tconst parameters = Object.entries(task.parameters);\n\n\tconst allOptions = await Promise.all(\n\t\tparameters.map(async ([name, param]) => ({\n\t\t\t...param,\n\t\t\tname,\n\t\t\tdefault:\n\t\t\t\t// Merge available default options with parameter initial values\n\t\t\t\ttypeof options[name] !== \"undefined\"\n\t\t\t\t\t? options[name]\n\t\t\t\t\t: typeof param.default === \"function\"\n\t\t\t\t\t? await param.default(options)\n\t\t\t\t\t: param.default,\n\t\t}))\n\t);\n\n\t// Split interactive and static options\n\tconst [prompts, statics] = partition(\n\t\tallOptions,\n\t\toption => interactive && option.type !== \"config\"\n\t);\n\n\t// Validate static options\n\tconst invalid = statics.filter(param =>\n\t\tparam.validate ? param.validate(param.default) !== true : false\n\t);\n\tif (invalid.length > 0) {\n\t\tconst names = invalid.map(({ name }) => name);\n\t\tthrow new MrmUndefinedOption(\n\t\t\t`Missing required config options: ${names.join(\", \")}.`,\n\t\t\t{\n\t\t\t\tunknown: names,\n\t\t\t}\n\t\t);\n\t}\n\n\t// Run Inquirer.js with interactive options\n\tconst answers = prompts.length > 0 ? await inquirer.prompt(prompts) : {};\n\n\t// Merge answers with static defaults\n\tconst values = { ...answers };\n\tfor (const param of statics) {\n\t\tvalues[param.name] = param.default;\n\t}\n\n\treturn values;\n}\n","import npx from \"libnpx\";\nimport { lstat } from \"node:fs/promises\";\nimport { createRequire } from \"node:module\";\nimport path from \"node:path\";\nimport which from \"which\";\n\nimport { getPackageName, mrmDebug } from \"../mrm\";\nimport { printError } from \"./console\";\nimport { promiseFirst } from \"./promises\";\nimport { CliArgs } from \"./types\";\n\n/* Return the functionality of `require` from commonjs */\nconst require = createRequire(import.meta.url);\n\n/**\n * Resolve a module on-the-fly using npx under the hood\n *\n * @param  {string} packageName\n * @return {Promise<string>}\n */\nexport async function resolveUsingNpx(packageName: string) {\n\tconst debug = mrmDebug.extend(\"npxResolver\");\n\tconst npm = await which(\"npm\");\n\n\tdebug(`npx._ensurePackages('%s')`, packageName);\n\tconst { prefix } = await npx._ensurePackages(packageName, {\n\t\tnpm,\n\t\tq: !mrmDebug.enabled,\n\t});\n\n\tdebug(`npx temp dir`, prefix);\n\tconst resolved = require.resolve(packageName, {\n\t\tpaths: [\n\t\t\tpath.join(prefix, \"lib\", \"node_modules\"),\n\t\t\tpath.join(prefix, \"lib64\", \"node_modules\"),\n\t\t],\n\t});\n\n\tif (!resolved) {\n\t\tthrow Error(`npx failed resolving ${packageName}`);\n\t}\n\n\tdebug(`+++ %s`, resolved);\n\treturn resolved;\n}\n\nexport async function resolveDirectories(\n\tpaths: string[],\n\tpreset: string,\n\targv: CliArgs\n): Promise<string[]> {\n\t// Custom config / tasks directory\n\tif (argv.dir) {\n\t\tconst resolvedDir = path.resolve(argv.dir);\n\t\tconst stat = await lstat(resolvedDir);\n\t\tif (stat.isDirectory()) {\n\t\t\tprintError(`Directory \"${resolvedDir}\" not found.`);\n\t\t\tprocess.exit(1);\n\t\t}\n\n\t\tpaths.unshift(resolvedDir);\n\t}\n\tconst presetPackageName = getPackageName(\"preset\", preset);\n\ttry {\n\t\tconst presetPath = await promiseFirst([\n\t\t\t() => require.resolve(presetPackageName),\n\t\t\t() => require.resolve(preset),\n\t\t\t() => resolveUsingNpx(presetPackageName),\n\t\t\t() => resolveUsingNpx(preset),\n\t\t]);\n\t\treturn [...paths, path.dirname(presetPath)];\n\t} catch {\n\t\tprintError(`Preset \"${preset}\" not found.\n\n\tWe've tried to load \"${presetPackageName}\" and \"${preset}\" npm packages.`);\n\t\treturn process.exit(1);\n\t}\n}\n","import kleur from \"kleur\";\n\n/**\n * Pretty Error messages\n */\nexport function printError(message: string) {\n\tconsole.log();\n\tconsole.error(kleur.bold().red(message));\n\tconsole.log();\n}\n","/**\n * Turn a list of items into a natural, readable list\n *\n * Code adapted from `lisitify`\n * @link https://github.com/ljharb/listify\n */\nexport function toNaturalList(\n\tlist: string[],\n\tseparator = \",\",\n\tfinalWord = \"and\"\n): string {\n\tif (!Array.isArray(list)) {\n\t\tthrow new TypeError(\"requires an array\");\n\t}\n\n\t// space for last value\n\tif (finalWord.length > 0) {\n\t\tfinalWord += \" \";\n\t}\n\n\tconst trimmed = list.filter(item => item.trim());\n\n\tlet str;\n\n\tif (trimmed.length === 2 && finalWord.length > 0) {\n\t\tstr = trimmed.join(\" \" + finalWord);\n\t} else if (trimmed.length < 3) {\n\t\tstr = trimmed.join(separator);\n\t} else {\n\t\tconst head = trimmed.slice(0, -1);\n\t\tconst tail = finalWord + trimmed[trimmed.length - 1];\n\n\t\tstr = [head, tail].join(separator);\n\t}\n\n\treturn str;\n}\n","import updateNotifier from \"update-notifier\";\n\nimport packageJson from \"../../package.json\" assert { type: \"json\" };\nimport { cliDebug } from \"../cli\";\n\n/**\n * Check for newer versions of the tool\n */\nexport function runUpdater() {\n\tconst notifier = updateNotifier({ pkg: packageJson });\n\n\tcliDebug(\"current pkg version: %s\", notifier.update?.current);\n\tcliDebug(\"latest pkg version: %s\", notifier.update?.latest);\n\n\treturn notifier.notify();\n}\n"],"mappings":"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","names":["import_kleur","import_lodash_es","kleur","path","fs","require","path","envPaths","import_kleur","import_node_module","import_path","import_kleur","import_lodash_es","import_node_module","import_promises","import_node_module","import_node_path","import_kleur","kleur","import_meta","require","mrmDebug","which","npx","path","import_meta","require","mrmDebug","Debug","kleur","module","inquirer","import_meta","require","mrmDebug","kleur","glob","path","module","updateNotifier","mrmDebug","ora","minimist","kleur","longest"]}